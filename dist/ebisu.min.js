"use strict";var ebisu=(()=>{var T=Object.defineProperty;var ee=Object.getOwnPropertyDescriptor;var ne=Object.getOwnPropertyNames;var re=Object.prototype.hasOwnProperty;var R=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),te=(n,e)=>{for(var r in e)T(n,r,{get:e[r],enumerable:!0})},oe=(n,e,r,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of ne(e))!re.call(n,o)&&o!==r&&T(n,o,{get:()=>e[o],enumerable:!(t=ee(e,o))||t.enumerable});return n};var ie=n=>oe(T({},"__esModule",{value:!0}),n);var J=R((ye,V)=>{"use strict";var S=2/(1+Math.sqrt(5));V.exports=ae;function ae(n,e,r,t,o,i){for(var c,a,m=0,u=r-S*(r-e),l=e+S*(r-e),f=n(u),s=n(l),d=n(e),x=n(r),h=e,M=r;++m<o&&Math.abs(r-e)>t;)s>f?(r=l,l=u,s=f,u=r-S*(r-e),f=n(u)):(e=u,u=l,f=s,l=e+S*(r-e),s=n(l));return c=.5*(r+e),a=.5*(f+s),i&&(i.iterations=m,i.argmin=c,i.minimum=a,i.converged=!0),isNaN(s)||isNaN(f)||m===o?(i&&(i.converged=!1),NaN):d<a?h:x<a?M:c}});var Q=R((Ee,K)=>{"use strict";K.exports=ue;function ue(n,e,r,t,o,i,c){var a,m,u,l,f,s,d;for(l=1,f=r,s=r,u=m=a=e(r);!d&&isFinite(t)&&!isNaN(t);)if(++l,d=!0,m<=u&&(u=m,f=Math.max(o,f-t),m=e(f),d=!1),a<=u&&(u=a,s=Math.min(i,s+t),a=e(s),d=!1),u=Math.min(u,m,a),(m===u&&f===o||a===u&&s===i)&&(d=!0),t*=l<4?2:Math.exp(l*.5),!isFinite(t))return n[0]=-1/0,n[1]=1/0,n;return n[0]=f,n[1]=s,n}});var X=R((Ae,W)=>{"use strict";var me=J(),le=Q(),I=[0,0];W.exports=function(e,r,t){r=r||{};var o,i=r.tolerance===void 0?1e-8:r.tolerance,c=r.initialIncrement===void 0?1:r.initialIncrement,a=r.lowerBound===void 0?-1/0:r.lowerBound,m=r.upperBound===void 0?1/0:r.upperBound,u=r.maxIterations===void 0?100:r.maxIterations;if(t&&(t.iterations=0,t.argmin=NaN,t.minimum=1/0,t.converged=!1),isFinite(m)&&isFinite(a))I[0]=a,I[1]=m;else if(r.guess===void 0?a>-1/0?o=m<1/0?.5*(a+m):a:o=m<1/0?m:0:o=r.guess,le(I,e,o,c,a,m,u),isNaN(I[0])||isNaN(I[1]))return NaN;return me(e,I[0],I[1],i,u,t)}});var q=R((_e,G)=>{var Y=7,Z=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23],fe=607/128,j=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function $(n){if(n<0)return Number("0/0");for(var e=j[0],r=j.length-1;r>0;--r)e+=j[r]/(n+r);var t=n+fe+.5;return .5*Math.log(2*Math.PI)+(n+.5)*Math.log(t)-t+Math.log(e)-Math.log(n)}G.exports=function n(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*n(1-e));if(e>100)return Math.exp($(e));e-=1;for(var r=Z[0],t=1;t<Y+2;t++)r+=Z[t]/(e+t);var o=e+Y+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,e+.5)*Math.exp(-o)*r};G.exports.log=$});var Ne={};te(Ne,{customizeMath:()=>Me,defaultModel:()=>xe,modelToPercentileDecay:()=>k,predictRecall:()=>ve,rescaleHalflife:()=>Ie,updateRecall:()=>pe});var H=X();var A=q(),C=A.log;var ce=Math.exp,se=Math.log,de=Math.sign,he=Math.max;function z(n,e){let r=he(...n),t=0;for(let c=n.length-1;c>=0;c--)t+=e[c]*ce(n[c]-r);let o=de(t);return t*=o,[se(t)+r,o]}var L=new Map;function P(n){let e=L.get(n);return e!==void 0||(e=C(n),L.set(n,e)),e}function ge(n,e,r){return C(n)-C(n+r)+P(e+r)-P(e)}var w=(n,e)=>P(n)+P(e)-P(n+e),y=(n,e)=>A(n)*A(e)/A(n+e);function be(n,e){return-w(1+n-e,1+e)-Math.log(n+1)}function Me(n){let e={betaln:w,betafn:y};return n.betaln&&(w=n.betaln),n.betafn&&(y=n.betafn),e}function U(n,e){var r=n*(1-n)/e-1,t=n*r,o=(1-n)*r;return[t,o]}function ve(n,e,r=!1){let[t,o,i]=n,c=e/i,a=ge(t+c,t,o);return r?Math.exp(a):a}function pe(n,e,r,t,o=!0,i=void 0,c=void 0){if(0>e||e>r||r<1)throw new Error("0 <= successes and successes <= total and 1 <= total must be true");if(r===1)return we(n,e,t,o,i,c);let[a,m,u]=n,l=t/u,f=r-e,s=[];for(let g=0;g<=f;g++)s.push(be(f,g));function d(g,p){let B=[];for(let b=0;b<=f;b++)B.push(s[b]+w(a+l*(e+b)+g*l*p,m));let F=[];for(let b=0;b<=f;b++)F.push(Math.pow(-1,b));return z(B,F)[0]}let x=d(0,0),h;if(o){let g=Math.log(.5),p=function(b){return d(1,b)-x-g},B={},F=H(b=>Math.abs(p(b)),{},B);if(!("converged"in B)||!B.converged)throw new Error("failed to converge");h=F,i=h*t}i||(i=u),h=i/t;let M=d(1,h)-x,N=Math.exp(M),D=Math.exp(d(2,h)-x);if(N<=0)throw new Error("negative mean encountered");if(D<=0)throw new Error("negative 2nd moment encountered");let O=Math.exp(2*M),E=D-O;if(E<=0)throw new Error("negative variance encountered");let[_,v]=U(N,E);return[_,v,i]}function we(n,e,r,t=!0,o,i){let[c,a,m]=n,u=e>.5,l=u?e:1-e;i===void 0&&(i=1-l);let f=r/m,[s,d]=u?[l-i,i]:[i-l,1-i];u===!1?(s=i-l,d=1-i):(s=l-i,d=i);let x=s*y(c+f,a)+d*(y(c,a)||0);function h(v,g){let p=s*y(c+f+v*f*g,a);return d!==0&&(p+=d*y(c+v*f*g,a)),p/x}let M;if(t){let v={},g=H(p=>Math.abs(h(1,p)-.5),{lowerBound:0},v);if(!("converged"in v)||!v.converged)throw new Error("failed to converge");M=g,o=M*r}else o||(o=m),M=o/r;let N=h(1,M),O=h(2,M)-N*N,[E,_]=U(N,O);if(E<=0||_<=0)throw new Error("newAlpha and newBeta must be greater than zero");return[E,_,o]}function xe(n,e=4,r=e){return[e,r,n]}function k(n,e=.5,r=1e-4){if(e<0||e>1)throw new Error("percentiles must be between (0, 1) exclusive");let[t,o,i]=n,c=w(t,o),a=Math.log(e);function m(f){let s=w(t+f,o)-c;return Math.abs(s-a)}let u={},l=H(m,{lowerBound:0,tolerance:r},u);if(!("converged"in u)||!u.converged)throw new Error("failed to converge");return l*i}function Ie(n,e=1){let[r,t,o]=n,i=k(n),c=i/o,a=w(r,t),m=w(r+2*c,t)-a,l=1/(8*Math.exp(m)-2)-.5;if(!(l>0))throw new Error("Assertion error: newAlphaBeta should be greater than 0");return[l,l,i*e]}return ie(Ne);})();
//# sourceMappingURL=ebisu.min.js.map
